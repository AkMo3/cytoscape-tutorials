
<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Legend Creator Tutorial</title>

		<link rel="stylesheet" href="../../css/reveal.css">
		<link rel="stylesheet" href="../../css/theme/cytoscape-protocol-1.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../../lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../../css/print/pdf.css' : '../../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

<!-- ========================================================== -->
<!-- THIS IS WHERE YOUR CONTENT BEGINS -->

<!-- ========================================================== -->
<!-- ========================================================== -->
     
<!--This is a slide with text in the form of a list, a figure and a citation -->
<section id='introduction'>
<h1>Legend Creator</h1>
<p>This tutorial describes how to use the Cytoscape Legend Creator to generate a legend illustrating the visual mapping used in your networks.</p>
<p>If you haven't already, install the <a href="http://apps.cytoscape.org/apps/legendcreator" target="_blank">Legend Creator app</a>.</p>
    
<div class="footer" style="bottom: -4em;">
    <a href="https://github.com/cytoscape/cytoscape-tutorials/wiki"><img class="plain" src="../../assets/images/cytoscape-tutorials.png" style="height:70px;opacity:0.5"></a></div>
</section>

<!-- ========================================================== -->

<section id='background'>
<h1>Background</h1>
    
<img style="float:right; width:35%" src="LC1.png">
<p>The Legend Creator includes a variety of features, for example describing a color gradient used for node fill color. This is a commonly used style mapping, and one that is difficult to recreate accurately in downstream tools.
</p><br /><br />
<div style="float:left">
    <p>First, let's review how <highlight>Styles</highlight> are used in Cytoscape.</p></div>
<ul>
    <li>In addition to setting <b>Default</b> style options, one can also set <b>Mappings</b> to define style options based on data in the node or edge table.</li>
    <li>Legend Creator can work with <b>continuous</b> and <b>discrete</b> mappings. Continuous mappings are created based on numerical values, where the range is determined by looking at the node table, such as expression level.</li>
    <li><b>Passthrough</b> mappings will not create a legend entry, and are not discussed in this tutorial.</li>
</ul> 

</section>

<!-- ========================================================== -->


<section id='setup'>
<h1>Getting started</h1>
<p>We need a network with some style mappings to demonstrate the features of the Legend Creator. Let's load the <b>Yeast Perturbation</b> network, provided by Cytoscape as a sample session file.</p>
<ul>
    <li>Open the Yeast Perturbation sample session from the Sample Sessions sessions in the <highlight>Starter Panel</highlight> when you first launch Cytoscape.</li>
    <li>You can also access the <highlight>Starter Panel</highlight> via <highlight>View &rarr; Show Starter Panel</highlight>.</li>
    
</ul>
</section>

<!-- ========================================================== -->

<section id='controlpanel'>
<h1>Legend Panel</h1>
<p>Next, we will take a look at the Legend Creator interface.</p>
<ul>
    <li>Select the <highlight>Legend Panel</highlight> tab of the <highlight>Control Panel</highlight>.</li>
    <li>The app will automatically scan the network to review the style mappings and nodes in the network to determine how to build each legend entry.</li>
    <li>This scan can also be started manually using the <highlight>Scan network</highlight> button.</li>
</ul>
<br /><br />

<div>
    <img src="LC6.png" style="height:350px"></div>
<p><b>Note:</b> Legends are generated as annotations, and as such, are not updated dynamically. You must manually remove and recreate the legend if you change your styles.</p>
</section>

<!-- ========================================================== -->

<section id='controlpanel2'>
<h1>Legend Panel</h1>
 
<ul>
    <li>The <highlight>Title</highlight> and <highlight>Subtitle</highlight> can be updated from the default values. It's not possible to control the font, size or alignment in the Legend Creator interface, but we will see how to edit those later.</li>
    <li>Check the <highlight>Lay out vertically</highlight> option to position the legend along the right margin of the network.</li> 
    <li>Check the box <highlight>Draw bounding box</highlight> if you want to include a rectangle surrounding all the legend entries.</li>
    <li>The Legend Panel shows the style mappings identified by the scan and these are checked by default. The name of the relevant node table column and the name of the mapped attribute are displayed. Uncheck any mappings you want to exclude from the legend.</li>
    <li>Click <highlight>Add Legend</highlight> button on the bottom of the panel to add the selected mappings.</li>
</ul>
  <br /><br /> 

<img style="float:right; width:30%" src="LC6.png">
<p>In this example, the <b>Node Label Font Size</b> and <b>Node Size</b> are both mapped to the node degree, or the number of neighbors a node has (<b>Degree</b> and <b>degree.layout</b> respectively) and the <b>Node Fill Color</b> is mapped to <b>gal1Rexp</b>.</p>      

</section>

<!-- ========================================================== -->

<section id='firstDraft'>
<h1>First Draft</h1>

<p>The network now includes the legend to the right of the network. The legend includes three components, one for each of the mappings we selected. The first two show both font label size and node size increasing with node degree, i.e., those with more neighbors. Third, a color gradient entry shows expression level of our protein of interest.</p>
 <div style="float:right">
    <img class="shadow" src="LC7.png" style="height:350px"></div><br /><br />
    <p>

<p>Depending on the purpose of the visualization you are creating, some mappings may not add much information to the legend and sometimes mappings are redundant. The easiest way to decide which entries are useful is to generate the full legend, look at the result and then make updates and recreate the legend.
</p>
</section>

<!-- ========================================================== -->



<section id='ramps'>
<h1>First Draft</h1>

<p>The first two mappings are similar in that they both map measures of the nodes’ degree to the size of both the nodes and its label, via a <b>continuous mapping</b>.</p>

<img src="Style_Legend_combined.png" style="width:70%">
    
<p><b>Note:</b> Although size is a useful attribute to map, showing it in a legend is not always useful. Our perception of size is qualitative; we can tell big from small, but we can’t tell a 50 pixel diameter from 63 pixel diameter if they are not right next to each other and the same shape. Adding a legend to show the quantitative measure of size is not always necessary.</p>
    
<!--<img style="float:left;" src="LC8.png">
<img style="float:right;" src="LC9.png">-->
</section>
                
<!-- ========================================================== -->

<section id='gradient'>
<h1>First Draft</h1>

<p>The other mapping is a color gradient. It should match our continuous mapping for the variable <b>gal1RGexp</b> in the <highlight>Style</highlight> panel. This is clearly the most important entry in our legend. Perceptually, color attributes are the most powerful mapping and should be used for the strongest message you are trying to convey.</p>

<img src="Style_Legend_combined2.png" style="width:70%">
    
<p><b>Note: </b> Because color is such an important attribute perceptually, it is important to use color with care. Rather than defining arbitrary colors for minimum and maximum values, we recommended using pre-defined color palettes that have been designed to make sure they have consistent color saturation across the range. If you double-click on a gradient in the <highlight>Style</highlight> panel to bring up the editor, a button to choose palettes is available in the upper left.</p>
<!--<img style="float:left;" src="LCA.png">
<img style="float:right;" src="LCB.png">-->
</section>

<!-- ========================================================== -->

<!--<section id='shape'>
<h1>Shape Legend</h1>

<p>
Another legend entry we could generate is a Shape Legend.  It is a discrete mapping, meaning that the values are listed explicitly, instead of being calculated from a function.

</p>

<p>

<img style="float:center;" src="LCC.png">
</section>-->

<!-- ========================================================== -->

<!--
<section id='kiss'>
<h1>First Draft</h1>

<p>Here is our network with three mappings shown:</p>
<img style="width:70%" src="LC7.png">
</section>
-->

<!-- ========================================================== -->

<section id='layout'>
<h1>Layout and Placement</h1>
<ul>
    <li>The Legend can be layed out <b>vertically</b> or <b>horizontally</b>, and will always be placed outside the bounds of the network.</li>
    <li>To move the legend, first click the <highlight>Toggle Annotation Selection</highlight> option in the <highlight>Network View Tools</highlight> under the network (red arrow). Unselect <highlight>Toggle Edge Selection</highlight> and <highlight>Toggle Node Selection</highlight>. You can then select the legend by shift-and-drag. Once selected, you can reposition the legend.</li>
</ul>
<img class="shadow" src="LCG.png" style="width:50%">
</section>

<!-- ========================================================== -->

<section id='annotation'>
<h1>Annotation Panel</h1>

 <div style="float:right">
    <img class="shadow" src="LCH.png" style="height:650px"></div><br/>
<p>To edit more specific aspects of the legend, such as the fonts or sizes, or the color of the background, you will need to use the <highlight>Annotation</highlight> control panel.  There, you’ll see every label and entry of the legend in a list view. There are several operations available to edit annotations here:</p>

<ul>
	<li>Add or remove items from the foreground or background layers.</li>
    <li>Move items up or down, or move them between the layers.</li>
    <li>Right-click and select <highlight>Modify Annotation... </highlight>to edit the item.</li>
</ul>
</section>

<!-- ========================================================== -->

<section id='summary'>
<h1>Summary</h1>

<p>The Legend Creator creates legends for the most common attributes applied to nodes in your graph. Adding legends for edge attributes, such as line style, color and thickness, is not supported in the current version, but is a planned feature.</p>
</section>

<!-- ========================================================== -->


                
<!-- THIS IS WHERE YOUR CONTENT ENDS -->
<!-- ========================================================== -->

                
			</div>
		</div>

		<script src="../../lib/js/head.min.js"></script>
		<script src="../../js/reveal.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-155159-15', 'auto');
  ga('send', 'pageview');
</script>
<script>
	Reveal.addEventListener( 'ready', function() {
	if(!window.navigator.userAgent.includes('CyBrowser')){
		var divs = document.getElementsByClassName("cybrowser")
		for (var i=0;i<divs.length;i++){
			divs[i].style.display = "none";
		}
	} else {
		var divs = document.getElementsByClassName("not-cybrowser")
		for (var i=0;i<divs.length;i++){
			divs[i].style.display = "none";
		}
	}
});
</script>  
		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				controls: true,
				progress: true,
				slideNumber: false,
				touch: true,
				fragments: true,
				help: true,
				showNotes: false,
				previewLinks: false,
				transition: 'slide', // none/fade/slide/convex/concave/zoom
				width: 1200,
				height: 860,
				autoSlide: 0,
				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
				{ src: '../../plugin/markdown/marked.js' },
				{ src: '../../plugin/markdown/markdown.js' },
				{ src: '../../plugin/zoom-js/zoom.js', async: true, condition: function(){ return !!document.body.classList; } },
				{ src: '../../plugin/notes/notes.js', async: true },
				{ src: '../../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
				{ src: '../../plugin/external/external.js', condition: function() { return !!document.querySelector( '[data-external]' ); } }
				]
				});
			</script>
		</body>
	</html>
